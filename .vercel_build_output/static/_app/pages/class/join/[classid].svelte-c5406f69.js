import{S as s,i as a,s as t,e as o,c,a as e,d as r,b as l,f as n,u as i,w as u,x as h,L as d,r as f,X as m,O as p,t as g,k as $,j as v,g as x,n as E,m as j,E as I,o as k,v as b,J as y,I as L,h as U}from"../../../chunks/vendor-84d358ea.js";import{g as V}from"../../../chunks/navigation-2ffed81e.js";import{p as D}from"../../../chunks/stores-fc13adb4.js";import{f as R}from"../../../chunks/firestore-4b106374.js";import{B as S}from"../../../chunks/Button-4e687b11.js";import{a as w}from"../../../chunks/authStore-d95ae1ed.js";import"../../../chunks/singletons-12a22614.js";import"../../../chunks/preload-helper-08cc8e69.js";function N(s){let a,t,u,d,f;return d=new S({props:{color:"bg-blue-500",link:"/login",$$slots:{icon:[C],default:[_]},$$scope:{ctx:s}}}),{c(){a=o("div"),t=g("You are not logged in"),u=$(),v(d.$$.fragment),this.h()},l(s){a=c(s,"DIV",{class:!0});var o=e(a);t=x(o,"You are not logged in"),o.forEach(r),u=E(s),j(d.$$.fragment,s),this.h()},h(){l(a,"class","text-red-500 text-center")},m(s,o){n(s,a,o),I(a,t),n(s,u,o),k(d,s,o),f=!0},p(s,a){const t={};256&a&&(t.$$scope={dirty:a,ctx:s}),d.$set(t)},i(s){f||(h(d.$$.fragment,s),f=!0)},o(s){i(d.$$.fragment,s),f=!1},d(s){s&&r(a),s&&r(u),b(d,s)}}}function O(s){let a,t,d,m,p,v,j,k,b=s[3]("class.join")+"",y=void 0!==s[0]&&H(s);return{c(){a=o("h1"),t=g(b),d=$(),m=o("div"),p=g(s[1]),v=$(),j=o("section"),y&&y.c(),this.h()},l(o){a=c(o,"H1",{class:!0});var l=e(a);t=x(l,b),l.forEach(r),d=E(o),m=c(o,"DIV",{class:!0});var n=e(m);p=x(n,s[1]),n.forEach(r),v=E(o),j=c(o,"SECTION",{class:!0});var i=e(j);y&&y.l(i),i.forEach(r),this.h()},h(){l(a,"class","text-6xl uppercase font-thin text-center p-8"),l(m,"class","text-red-500 text-center"),l(j,"class","full-height")},m(s,o){n(s,a,o),I(a,t),n(s,d,o),n(s,m,o),I(m,p),n(s,v,o),n(s,j,o),y&&y.m(j,null),k=!0},p(s,a){(!k||8&a)&&b!==(b=s[3]("class.join")+"")&&U(t,b),(!k||2&a)&&U(p,s[1]),void 0!==s[0]?y?(y.p(s,a),1&a&&h(y,1)):(y=H(s),y.c(),h(y,1),y.m(j,null)):y&&(f(),i(y,1,1,(()=>{y=null})),u())},i(s){k||(h(y),k=!0)},o(s){i(y),k=!1},d(s){s&&r(a),s&&r(d),s&&r(m),s&&r(v),s&&r(j),y&&y.d()}}}function _(s){let a;return{c(){a=g("Login Here")},l(s){a=x(s,"Login Here")},m(s,t){n(s,a,t)},d(s){s&&r(a)}}}function C(s){let a,t;return{c(){a=o("div"),t=g("account_circle"),this.h()},l(s){a=c(s,"DIV",{class:!0,slot:!0});var o=e(a);t=x(o,"account_circle"),o.forEach(r),this.h()},h(){l(a,"class","material-icons"),l(a,"slot","icon")},m(s,o){n(s,a,o),I(a,t)},d(s){s&&r(a)}}}function H(s){let a,t,u,d,f,m,p,V,D,R,w,N,O,_,C,H,Y=s[0].name+"",B=s[0].desc+"";return O=new S({props:{color:"bg-blue-500",link:"",$$slots:{icon:[T],default:[J]},$$scope:{ctx:s}}}),{c(){a=o("section"),t=o("img"),d=$(),f=o("div"),m=o("div"),p=g(Y),V=$(),D=o("p"),R=g(B),w=$(),N=o("span"),v(O.$$.fragment),this.h()},l(s){a=c(s,"SECTION",{class:!0});var o=e(a);t=c(o,"IMG",{src:!0,class:!0,alt:!0}),d=E(o),f=c(o,"DIV",{class:!0});var l=e(f);m=c(l,"DIV",{class:!0});var n=e(m);p=x(n,Y),n.forEach(r),V=E(l),D=c(l,"P",{class:!0});var i=e(D);R=x(i,B),i.forEach(r),w=E(l),N=c(l,"SPAN",{});var u=e(N);j(O.$$.fragment,u),u.forEach(r),l.forEach(r),o.forEach(r),this.h()},h(){y(t.src,u=s[0].photoURL)||l(t,"src",u),l(t,"class","rounded-full h-64 w-64 mb-8 mr-16"),l(t,"alt",""),l(m,"class","text-4xl uppercase font-bold "),l(D,"class","text-gray-700"),l(f,"class","classinfo mt-8"),l(a,"class","class flex justify-center pt-32")},m(o,c){n(o,a,c),I(a,t),I(a,d),I(a,f),I(f,m),I(m,p),I(f,V),I(f,D),I(D,R),I(f,w),I(f,N),k(O,N,null),_=!0,C||(H=L(N,"click",s[4]),C=!0)},p(s,a){(!_||1&a&&!y(t.src,u=s[0].photoURL))&&l(t,"src",u),(!_||1&a)&&Y!==(Y=s[0].name+"")&&U(p,Y),(!_||1&a)&&B!==(B=s[0].desc+"")&&U(R,B);const o={};256&a&&(o.$$scope={dirty:a,ctx:s}),O.$set(o)},i(s){_||(h(O.$$.fragment,s),_=!0)},o(s){i(O.$$.fragment,s),_=!1},d(s){s&&r(a),b(O),C=!1,H()}}}function J(s){let a;return{c(){a=g("Join class")},l(s){a=x(s,"Join class")},m(s,t){n(s,a,t)},d(s){s&&r(a)}}}function T(s){let a,t;return{c(){a=o("div"),t=g("group_add"),this.h()},l(s){a=c(s,"DIV",{class:!0,slot:!0});var o=e(a);t=x(o,"group_add"),o.forEach(r),this.h()},h(){l(a,"class","material-icons"),l(a,"slot","icon")},m(s,o){n(s,a,o),I(a,t)},d(s){s&&r(a)}}}function Y(s){let a,t,d,m;const p=[O,N],g=[];function $(s,a){return void 0!==s[2].user?0:1}return t=$(s),d=g[t]=p[t](s),{c(){a=o("section"),d.c(),this.h()},l(s){a=c(s,"SECTION",{class:!0});var t=e(a);d.l(t),t.forEach(r),this.h()},h(){l(a,"class","outline-none")},m(s,o){n(s,a,o),g[t].m(a,null),m=!0},p(s,[o]){let c=t;t=$(s),t===c?g[t].p(s,o):(f(),i(g[c],1,1,(()=>{g[c]=null})),u(),d=g[t],d?d.p(s,o):(d=g[t]=p[t](s),d.c()),h(d,1),d.m(a,null))},i(s){m||(h(d),m=!0)},o(s){i(d),m=!1},d(s){s&&r(a),g[t].d()}}}function B(s,a,t){let o,c,e,r,l;d(s,w,(s=>t(2,o=s))),d(s,D,(s=>t(6,c=s))),d(s,m,(s=>t(3,e=s))),V("/"),V(`class/join/${c.params.classid}`),async function(){l=c.params.classid,console.log(l);try{(await R()).collection("classes").doc(l).get().then((s=>{t(0,r=s.data()),console.log(r)}))}catch(s){console.error(s)}}();let n="";return[r,n,o,e,()=>{const s=p.firestore();void 0!==o.user?(console.log(l),s.collection("classes").doc(l).update({members:p.firestore.FieldValue.arrayUnion({name:o.user.displayName,photoURL:o.user.photoURL,uid:o.user.uid})}),s.collection("users").doc(o.user.uid).collection("privateInfo").doc(o.user.uid).update({classes:p.firestore.FieldValue.arrayUnion({classID:l,photoURL:r.photoURL,desc:r.desc,name:r.name})}),V(`/class/${l}`)):t(1,n="You are not logged in")}]}class F extends s{constructor(s){super(),a(this,s,B,Y,t,{})}}export{F as default};
